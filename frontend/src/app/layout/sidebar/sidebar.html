<aside 
  class="fixed left-0 top-0 z-40 h-screen transition-all duration-300 ease-in-out bg-white border-r border-gray-200 shadow-lg"
  [class.w-64]="!isCollapsed"
  [class.w-16]="isCollapsed"
>
  <!-- Sidebar Header -->
  <div class="flex items-center justify-between h-16 px-4 border-b border-gray-200">
    <div class="flex items-center space-x-3" [class.justify-center]="isCollapsed">
      <div class="flex items-center justify-center w-8 h-8 bg-blue-600 rounded-lg">
        <i class="fas fa-cube text-white text-sm"></i>
      </div>
      <h2 
        class="text-xl font-bold text-gray-800 transition-all duration-300"
        [class.opacity-0]="isCollapsed"
        [class.hidden]="isCollapsed"
      >
        AdminPro
      </h2>
    </div>
    
    <!-- Toggle Button -->
    <button
      (click)="onToggleSidebar()"
      class="p-1.5 rounded-lg hover:bg-gray-100 transition-colors duration-200"
      [class.hidden]="isCollapsed"
    >
      <i class="fas fa-chevron-left text-gray-500 text-sm"></i>
    </button>
  </div>

  <!-- Navigation Menu -->
  <nav class="flex-1 px-3 py-4 overflow-y-auto">
    <ul class="space-y-2">
      <li *ngFor="let item of menuItems">
        <!-- Main Menu Item -->
        <div>
          <button
            (click)="item.children ? toggleSubmenu(item) : navigateTo(item.route!)"
            class="flex items-center w-full px-3 py-2.5 text-left rounded-lg transition-all duration-200 group relative"
            [class]="item.isActive 
              ? 'bg-blue-50 text-blue-700 border-r-2 border-blue-700' 
              : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900'"
          >
            <!-- Icon -->
            <i 
              [class]="item.icon" 
              class="flex-shrink-0 w-5 h-5 transition-colors duration-200"
              [class.text-blue-700]="item.isActive"
              [class.text-gray-500]="!item.isActive"
            ></i>
            
            <!-- Label -->
            <span 
              class="ml-3 font-medium transition-all duration-300"
              [class.opacity-0]="isCollapsed"
              [class.translate-x-2]="isCollapsed"
            >
              {{ item.label }}
            </span>

            <!-- Badge -->
            <span 
              *ngIf="item.badge && !isCollapsed"
              class="ml-auto px-2 py-0.5 text-xs font-medium text-white rounded-full"
              [class]="item.badgeColor || 'bg-gray-500'"
            >
              {{ item.badge }}
            </span>

            <!-- Dropdown Arrow -->
            <i 
              *ngIf="item.children && !isCollapsed"
              class="fas fa-chevron-down ml-auto text-xs transition-transform duration-200"
              [class.rotate-180]="item.isExpanded"
            ></i>

            <!-- Tooltip for collapsed state -->
            <div 
              *ngIf="isCollapsed"
              class="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50"
            >
              {{ item.label }}
              <div class="absolute left-0 top-1/2 transform -translate-x-1 -translate-y-1/2 border-4 border-transparent border-r-gray-900"></div>
            </div>
          </button>

          <!-- Submenu -->
          <div 
            *ngIf="item.children && item.isExpanded && !isCollapsed"
            class="mt-1 space-y-1 transition-all duration-300 ease-in-out"
          >
            <button
              *ngFor="let child of item.children"
              (click)="navigateTo(child.route!)"
              class="flex items-center w-full px-3 py-2 ml-6 text-sm rounded-lg transition-all duration-200"
              [class]="child.isActive 
                ? 'bg-blue-50 text-blue-700' 
                : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'"
            >
              <i 
                [class]="child.icon" 
                class="flex-shrink-0 w-4 h-4 mr-2"
                [class.text-blue-700]="child.isActive"
                [class.text-gray-400]="!child.isActive"
              ></i>
              {{ child.label }}
            </button>
          </div>
        </div>
      </li>
    </ul>
  </nav>

  <!-- User Profile Section -->
  <div class="p-3 border-t border-gray-200">
    <div class="flex items-center space-x-3" [class.justify-center]="isCollapsed">
      <img 
        src="https://via.placeholder.com/32x32?text=U" 
        alt="User Avatar" 
        class="w-8 h-8 rounded-full"
      >
      <div 
        class="flex-1 transition-all duration-300"
        [class.opacity-0]="isCollapsed"
        [class.hidden]="isCollapsed"
      >
        <p class="text-sm font-medium text-gray-900">John Doe</p>
        <p class="text-xs text-gray-500">Administrator</p>
      </div>
      <div 
        class="flex items-center space-x-1"
        [class.hidden]="isCollapsed"
      >
        <button
          class="p-1 rounded hover:bg-gray-100 transition-colors duration-200"
          title="Settings"
        >
          <i class="fas fa-cog text-gray-500 text-sm"></i>
        </button>
        <button
          (click)="logout()"
          class="p-1 rounded hover:bg-gray-100 transition-colors duration-200"
          title="Logout"
        >
          <i class="fas fa-sign-out-alt text-gray-500 text-sm"></i>
        </button>
      </div>
    </div>
    
    <!-- Collapsed state tooltip for user section -->
    <div 
      *ngIf="isCollapsed"
      class="mt-2 flex justify-center"
    >
      <button
        (click)="logout()"
        class="p-1.5 rounded hover:bg-gray-100 transition-colors duration-200 group relative"
        title="Logout"
      >
        <i class="fas fa-sign-out-alt text-gray-500 text-sm"></i>
        <div class="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50">
          Logout
          <div class="absolute left-0 top-1/2 transform -translate-x-1 -translate-y-1/2 border-4 border-transparent border-r-gray-900"></div>
        </div>
      </button>
    </div>
  </div>
</aside>
